---
image: 3.jpg
title: "[è­¯æ–‡] å¦‚ä½•ä½¿ @nuxt/content é …ç›®åœ¨éƒ¨å±¬åˆ°ä¼ºæœå™¨æ™‚ä¿æŒ createdAt å’Œ updatedAt ä¸è¢«é‡ç½®ï¼Ÿ"
category: tech
description: "æ˜¨å¤©å°‡ Blog éƒ¨å±¬åˆ° GitHub Page çš„æ™‚ï¼Œç™¼ç¾äº† createdAt å’Œ updatedAt æ¯æ¬¡ Git æ¨é€ä¸Šå»ä¸€æ¬¡å°±æœƒè¢«é‡ç½®ï¼Œé€™æ„å‘³è‘— Git ä¸Šå»å¾Œä¸¦ä¸ä¿ç•™ markdown æ–‡ä»¶å…ƒæ•¸æ“šï¼Œç­‰åŒæ–¼ @nuxt/content çš„ createdAt å’Œ updatedAt æ™‚é–“æˆ³å®Œå…¨å¤±å»äº†æ•ˆæœã€‚"
tags: ['nuxt', 'nuxtcontent', 'git', 'blog']
sourceimg1_n: Praveen Thirumurugan
sourceimg1_u: 'https://unsplash.com/@praveentcom'
sourceimg2_n: Unsplash
sourceimg2_u: 'https://unsplash.com/photos/KPAQpJYzH0Y'
createdAtTime: '2023-02-02 14:00:40'
updatedAtTime: '2023-02-03 09:04:29'
slug: "3"
---

> **è¨»ï¼šGithub Action ä¾èˆŠç„¡æ³•ä½¿ç”¨æ­¤å¥—ä»¶å› ç‚ºæ˜¯ç›´æ¥éƒ¨å±¬ï¼ï¼ï¼éå…‹éš†(npm run generate)å¾Œç”¢ç”Ÿ dict è³‡æ–™å¤¾é€²è¡Œéƒ¨å±¬**

> **2/3 æ”¹æˆç”¨ Github Action æ¶è¨­å¾Œæ–¹æ³•å°±å¤±æ•ˆäº†ï¼æ‰€ä»¥ä¸é©åˆç›´æ¥éƒ¨å±¬æ–¹æ³•**

æ˜¨å¤©å°‡ Blog éƒ¨å±¬åˆ° GitHub Page çš„æ™‚ï¼Œç™¼ç¾äº† createdAt å’Œ updatedAt æ¯æ¬¡ Git æ¨é€ä¸Šå»ä¸€æ¬¡å°±æœƒè¢«é‡ç½®ï¼Œé€™æ„å‘³è‘— Git ä¸Šå»å¾Œä¸¦ä¸ä¿ç•™ markdown æ–‡ä»¶å…ƒæ•¸æ“šï¼Œç­‰åŒæ–¼ @nuxt/content çš„ createdAt å’Œ updatedAt æ™‚é–“æˆ³å®Œå…¨å¤±å»äº†æ•ˆæœã€‚

éå¸¸æ„Ÿè¬ [Sebastian Landwehr](https://sebastianlandwehr.com/blog/nuxt-content-how-to-keep-createdat-and-updatedat-valid-after-cloning/) çš„åˆ†äº«æ–‡ç« !!! çœŸçš„æœ‰å¤ å¯¦ç”¨ï¼Œæ‰€ä»¥ç´€éŒ„çµ±æ•´ä¸€ä¸‹å¤§æ¦‚çš„è§£æ±ºæ–¹æ³•ã€‚

**è‹±æ–‡ç‚ºåŸä½œè€…ï¼Œä¸­æ–‡ç‚ºè­¯æ–‡**

---

## What?
One thing I noticed when deploying the project to my server was that the createdAt and updatedAt fields were always reset and didn't reflect the actual dates.
> å°‡å°ˆæ¡ˆéƒ¨ç½²åˆ°æœå‹™å™¨æ™‚æˆ‘æ³¨æ„åˆ°çš„ä¸€ä»¶äº‹æ˜¯ createdAt å’Œ updatedAt å€å¡Šç¸½æ˜¯è¢«é‡ç½®ä¸”æ²’æœ‰åæ˜ å‡ºå¯¦éš›æ—¥æœŸã€‚

<a href="/blog/3-1.jpg" target="_blank">

![Example image](/blog/3-1.jpg "Sketch map")

</a>

<p class="img-origin mt-1 mb-3 text-center">
    å¤§è‡´ç¤ºæ„åœ–ï¼Œå…¨éƒ¨è²¼æ–‡æ™‚é–“é‡ç½®éƒ½åœ¨æœ€å¾Œæ¨é€ä¸Šå»çš„æ™‚é–“
</p>

## Why?
The reason for this is that Git does not keep file metadata. This means that the timestamps that @nuxt/content relies on are of no use.
> ä¸»è¦çš„åŸå› ç‚º Git ä¸æœƒä¿ç•™æ–‡ä»¶åŸå§‹æ•¸æ“šã€‚é€™ä»£è¡¨ @nuxt/contentçš„æ™‚é–“æ¨™è¨˜æ˜¯æ²’æœ‰ä½œç”¨çš„ã€‚

## How?
### - Git to the rescue!
One way to fix this is not to use the file stats, but instead use the Git history for this. Special thanks to [Andrew Kreuzer](http://andrewkreuzer.ca/) for the initial idea. We check the history for each file and take the earliest commit date as createdAt and the latest as updatedAt.
> é  Git ä¾†è§£æ•‘! æœ‰ä¸€å€‹è§£æ±ºæ­¤å•é¡Œçš„æ–¹æ³•å°±æ˜¯ä¸ä½¿ç”¨æ–‡ä»¶çš„çµ±è¨ˆæ•¸æ“šï¼Œè€Œæ˜¯ä»¥ Git çš„æ­·å²ç´€éŒ„å»æ›¿ä»£å®ƒã€‚ç‰¹åˆ¥æ„Ÿè¬ Andrew Kreuzer æœ€åˆçš„æƒ³æ³•ã€‚æˆ‘å€‘æª¢æŸ¥æ¯å€‹æª”æ¡ˆçš„æ­·å²ç´€éŒ„ï¼Œä¸¦ä¸”å°‡æœ€æ—©æäº¤æ•¸æ“šç•¶ä½œ`createdAt`ï¼Œè€Œæœ€æ–°çš„ç•¶ä½œ`updatedAt`ã€‚

Requirement for this is that Git is installed on the build system and that the history is actually checked out. There will be problems if a shallow clone is made on CI, in this case the cloning has to be configured accordingly.
> é€™ç¨®çš„è¦æ±‚å‰ææ˜¯è¦åœ¨æ§‹å»ºç³»çµ±æ™‚å®‰è£ Gitï¼Œä¸¦ä¸”æœ‰ç¢ºå¯¦åœ°æª¢æŸ¥æ­·å²ç´€éŒ„ã€‚å¦‚æœåœ¨ CI ä¸Šé€²è¡Œè¡¨å±¤ Clone æœƒå‡ºç¾å•é¡Œï¼Œåœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œå¿…é ˆç›¸æ‡‰é…ç½® Cloneã€‚
***CI (Continuous Integration) : ã€ŒæŒçºŒæ•´åˆã€çš„æ„æ€ã€‚ä¸»ç›®çš„ç‚ºåˆ©ç”¨é »ç¹çš„æäº¤ (Commit and Push) æ–°åŠŸèƒ½çš„è®Šå‹•ï¼Œä½¿æ¯æ¬¡çš„è®Šå‹•éƒ½è§¸ç™¼è‡ªå‹•åŒ–å»ºç½®èˆ‡æ¸¬è©¦ï¼Œè—‰æ­¤æ‰¾å‡ºè¢«å¿½ç•¥æˆ–æ½›åœ¨å•é¡Œï¼Œä»¥ç¢ºä¿æœ€æ–°ç‰ˆæœ¬æ˜¯å¯é‹è¡Œçš„ã€‚***

### - Using the nuxt-content-git module to make things easy
Install the module with`npm install nuxt-content-git`and add it to your`nuxt.config.js`like this:
> å®‰è£æ¨¡çµ„ `npm install nuxt-content-git` ä¸¦å°‡å…¶å®‰è£è‡³ `nuxt.config.js` åƒé€™æ¨£ï¼š
```js
export default {
  modules: [
    'nuxt-content-git',
    '@nuxt/content',
  ],
}
```
**æˆ‘æ˜¯ä½¿ç”¨ yarn é€²è¡Œ package ç®¡ç†çš„ï¼Œæ‰€ä»¥æ¨¡çµ„æ¡ `yarn add nuxt-content-git` é€²è¡Œå®‰è£ã€‚**

Note that it is important to add it before @nuxt/content, so @nuxt/content knows about the hooks that our helper module installs.
> è«‹æ³¨æ„ï¼Œé€™å¾ˆé‡è¦ï¼ä¸€å®šè¦å°‡`nuxt-content-git`æ–°å¢åœ¨`@nuxt/content`**å‰é¢**ï¼Œé€™æ¨£`@nuxt/content`æ‰äº†è§£æˆ‘å€‘è¼”åŠ©æ¨¡å¡Šå®‰è£çš„ hookã€‚


## ğŸ“š åŸæ–‡é€£çµ - Source Post Link
[1] Sebastian Landwehr's Blog

<https://sebastianlandwehr.com/blog/nuxt-content-how-to-keep-createdat-and-updatedat-valid-after-cloning/>

[2] Sebastian Landwehr's Medium

<https://javascript.plainenglish.io/nuxt-content-how-to-keep-createdat-and-updatedat-valid-after-cloning-f80fc7e9633b>